<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Créer une partie – Admin Loups</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h1>Créer une nouvelle partie</h1>

  <form method="POST" action="/create_game">
    <label>Nom de la partie :</label>
    <input name="name" required>

    <label>Lignes :</label>
    <input name="rows" type="number" min="2" max="10" required>

    <label>Colonnes :</label>
    <input name="cols" type="number" min="2" max="10" required>

    <label>Max joueurs :</label>
    <input name="max_players" type="number" min="2" max="10" required>

    <label>Obstacles :</label>
    <input name="nb_obstacles" type="number" min="0" required>

    <label>Tours :</label>
    <input name="nb_rounds" type="number" min="1" required>

    <label>Temps max/tour (s) :</label>
    <input name="timeout" type="number" min="5" max="300" required>

    <button type="submit">Créer la partie</button>
  </form>

  {% if game %}
    <h2>✅ Partie créée avec succès :</h2>
    <ul>
      <li><strong>ID :</strong> {{ game.id }}</li>
      <li><strong>Nom :</strong> {{ game.name }}</li>
      <li><strong>Taille :</strong> {{ game.rows }} x {{ game.cols }}</li>
      <li><strong>Max joueurs :</strong> {{ game.max_players }}</li>
      <li><strong>Obstacles :</strong> {{ game.nb_obstacles }}</li>
      <li><strong>Tours :</strong> {{ game.nb_rounds }}</li>
      <li><strong>Timeout :</strong> {{ game.timeout }} s</li>
      <li><strong>Statut :</strong> {{ game.status }}</li>
    </ul>
  {% endif %}
{% for g in games %}
  <li>
    #{{ g.id }} – {{ g.name }} ({{ g.rows }}x{{ g.cols }}, {{ g.max_players }} joueurs) – 
    <strong>{{ g.status }}</strong>

    {% if g.status == 'en attente' %}
      <form method="POST" action="/start_game/{{ g.id }}" style="display:inline">
        <button type="submit">Lancer</button>
      </form>
    {% else %}
      ✅ Partie en cours
    {% endif %}
  </li>
{% endfor %}

